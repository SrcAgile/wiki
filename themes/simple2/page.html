{%- extends "base.html" %}

{%- block title %}{{ page.title }} - {{ site.title }}{% endblock %}

{%- block container %}
<div id="header">
  <div class="post-nav">
    {%- if not default_home_page -%}
    <a href="{{ site.root }}/">Home</a>
      {%- if page.category -%}
        {%- for c in page.category.split("/") -%}
          {%- if loop.first -%}
            {%- set id = c -%}
          {%- else -%}
            {% set id = id ~ "-" ~ c -%}
          {%- endif -%}
          &nbsp;&#187;&nbsp;<a href="{{ site.root }}/#{{ id }}">{{ c }}</a>
        {%- endfor -%}
      {%- endif -%}
      &nbsp;&#187;&nbsp;{{ page.title }}
    <span class="updated">Page Updated&nbsp;
      {% if page.updated %}{{ page.updated }}
      {% else %}{{ page.date }}{% endif %}
    </span>
    {%- endif -%}
  </div>
</div>
<div class="clearfix"></div>

<div class="page_title">{{ page.title }}</div>

  {{ page.content }}

  {%- if page.relation %}
  <div class="relation">
    <h2>Related</h2>
    <ul>
    {% for r in page.relation %}
    <li><a href="{{ site.root }}/{{ r.category }}/{{ r.filename }}">{{ r.title }}</a></li>
    {% endfor %}
    </ul>
  </div>
  {%- endif %}
  <div id="comments"></div>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script type="text/javascript">
  const gitment = new Gitment({
    title: '{{ page.title }}',
    owner: 'srcmit',
    repo: 'wiki',
    oauth: {
      client_id: 'bde03e9480361e89d518',
      client_secret: '4cbe90a78300811e30fd5ac0eca9684f7169fc59',
    },
    // ...
    // For more available options, check out the documentation below
  })
  gitment.render('comments')
  // or
  // gitment.render(document.getElementById('comments'))
  // or
  // document.body.appendChild(gitment.render())
  </script>
{%- endblock %}
